```{r setup, include = FALSE}
knitr::opts_chunk$set(message = F, 
                      error = F, 
                      warning = F)

```

# Week 13 {-} 
<div style = "font-size: 28pt"> **_Multispecies models of competition: apparent competition_**</div>

## Lecture in a nutshell {-}

* **Topic:**
    1. 
    2. 
    3. 
    
<div style="height:1px ;"><br></div>

* **Topic:**
    1. 
    2. 
    3.

<div style="height:1px ;"><br></div>    
<br>


## Lab demonstration {-}

Here, we are going to visualize the outcomes of apparent competition between two logistically-growing prey species _N~1~_ and _N~2~_ under linear predator consumption in the _r~1~/a~1~ - r~2~/a~2~_ space:

<div style="margin-left: 30%;">$\begin{align}\frac {dN_{1}}{dt} = r_{1}N_{1}(1-\frac{N_{1}}{K_{1}})-a_{1}N_{1}P\end{align}\\$</div>
<div style="margin-left: 30%;">$\begin{align}\frac {dN_{2}}{dt} = r_{2}N_{2}(1-\frac{N_{2}}{K_{2}})-a_{2}N_{2}P\end{align}\\$</div>
<div style="margin-left: 30%; margin-bottom: 15px;">$\begin{align}\frac {dP}{dt} = e_{1}a_{1}N_{1}P+e_{2}a_{2}N_{2}P-mp\end{align}$</div>

```{r, fig.width = 5, fig.height = 3.5, out.width = "70%", fig.align = "center", }
library(tidyverse)
library(deSolve)

Apparent_logistic_func <- function(r1, r2){
  Apparent_logistic_model <- function(times, state, parms) {
    with(as.list(c(state, parms)), {
      dN1_dt = r1*N1*(1-N1/K1) - a1*N1*P
      dN2_dt = r2*N2*(1-N2/K2) - a2*N2*P
      dP_dt = e1*a1*N1*P + e2*a2*N2*P - m*P
      return(list(c(dN1_dt, dN2_dt, dP_dt)))  
    })
  }
  
  times <- seq(0, 500, by = 1)
  state <- c(N1 = 10, N2 = 10, P = 2)
  parms <- c(r1 = r1, r2 = r2, a1 = 0.5, a2 = 0.5, e1 = 0.4, e2 = 0.5, m = 0.5, K1 = 40, K2 = 30)
  
  pop_size <- ode(func = Apparent_logistic_model, times = times, y = state, parms = parms)
  
  N1_final <- pop_size[501, 2]
  N2_final <- pop_size[501, 3]

  if (N1_final < 1e-5) {
    return("N2_win")
  } else if (N2_final < 1e-5) {
    return("N1_win")
  } else {
    return("Coexist")
  }
  
}

Apparent_logistic_func(1.1, 1.2)

expand.grid(r1 = seq(1.1, 1.3, length.out = 10),
            r2 = seq(1.1, 1.3, length.out = 10),
            a = 0.5) %>%
  mutate(Outcome = map2_chr(r1, r2, Apparent_logistic_func))






```

<br>

## Additional readings {-}

No additional readings this week.
<br>

## Assignments {-}

No assignments this week.


